<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FreeEdit - All-in-One Free Tool Site</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>

<header>FreeEdit - Your All-in-One Tool</header>

<nav>
    <a href="#converters">Converters</a>
    <a href="#reducers">Reducers</a>
    <a href="#removers">Removers</a>
    <a href="#enhancers">Enhancers</a>
    <a href="#pdf-tools">PDF Tools</a>
    <a href="#text-audio">Text & Audio</a>
    <a href="#social-misc">Social & Misc</a>
</nav>

<div class="container">

    <!-- Converters -->
    <section id="converters" class="tool-category">
        <h2>Converters</h2>
        <div class="tool-card">
            <h3>Anything -> Anything Converter</h3>
            <p>Upload a file and we'll detect its type and show available conversions.</p>
            <input type="file" id="fileInput" multiple>
            <p id="fileTypeInfo"></p>
        </div>
    </section>

    <!-- Size Reducers -->
    <section id="reducers" class="tool-category">
        <h2>Size Reducers</h2>
        <div class="tool-card">
            <h3>Reduce File Size</h3>
            <p>Compress images, documents, PDFs, and videos.</p>
            <input type="file" id="reduceSizeInput">
            <button onclick="alert('Feature coming soon!')">Reduce Size</button>
        </div>
    </section>

    <!-- Removers -->
    <section id="removers" class="tool-category">
        <h2>Object & Watermark Removers</h2>
        <div class="tool-card">
            <h3>Background Remover (Photo/Video)</h3>
            <input type="file" id="bgRemoveInput">
            <button onclick="alert('Feature coming soon!')">Remove Background</button>
        </div>
        <div class="tool-card">
            <h3>Any Object Remover (Photo/Video)</h3>
            <input type="file" id="objectRemoveInput">
            <button onclick="alert('Feature coming soon!')">Remove Object</button>
        </div>
        <div class="tool-card">
            <h3>Watermark Remover (Photo/Doc/PDF/Video)</h3>
            <input type="file" id="watermarkRemoveInput">
            <button onclick="alert('Feature coming soon!')">Remove Watermark</button>
        </div>
    </section>

    <!-- Enhancers -->
    <section id="enhancers" class="tool-category">
        <h2>Image & Video Enhancers</h2>
        <div class="tool-card">
            <h3>Image Tools</h3>
            <label>Upload Image:</label>
            <input type="file" id="imageInput" accept="image/*">
            <label>Width (px):</label>
            <input type="number" id="imgWidth" placeholder="Original width">
            <label>Height (px):</label>
            <input type="number" id="imgHeight" placeholder="Original height">
            <button onclick="resizeImage()">Resize Image</button>
            <button onclick="convertImage()">Convert Format (PNG ↔ JPG)</button>
            <button onclick="rotateImage()">Rotate 90°</button>
            <button onclick="flipImage()">Flip Horizontally</button>
            <button onclick="grayscaleImage()">Grayscale</button>
            <canvas id="imageCanvas"></canvas>
        </div>
        <div class="tool-card">
            <h3>Expand Image/Video</h3>
            <input type="file" id="expandInput">
            <button onclick="alert('Feature coming soon!')">Expand</button>
        </div>
        <div class="tool-card">
            <h3>Upscale Image/Video</h3>
            <input type="file" id="upscaleInput">
            <button onclick="alert('Feature coming soon!')">Upscale</button>
        </div>
    </section>

    <!-- PDF Tools -->
    <section id="pdf-tools" class="tool-category">
        <h2>PDF Toolkit</h2>
        <div class="tool-card">
            <h3>Text ↔ PDF</h3>
            <label>Enter Text to Convert to PDF:</label>
            <textarea id="textInput" rows="5" placeholder="Type here..."></textarea>
            <button onclick="textToPDF()">Convert Text → PDF</button>

            <label>Upload PDF to Extract Text:</label>
            <input type="file" id="pdfToTextInput" accept="application/pdf">
            <button onclick="pdfToText()">Convert PDF → Text</button>
            <textarea id="pdfTextOutput" rows="5" placeholder="PDF text will appear here..." readonly></textarea>
        </div>
        <div class="tool-card">
            <h3>PDF Tools (Small Files)</h3>
            <label>Upload PDF:</label>
            <input type="file" id="pdfToolInput" accept="application/pdf" multiple>
            <button onclick="rotatePDF()">Rotate PDF 90°</button>
            <button onclick="splitPDF()">Split PDF</button>
            <button onclick="mergePDF()">Merge PDFs</button>
        </div>
    </section>

    <!-- Text & Audio -->
    <section id="text-audio" class="tool-category">
        <h2>Text & Audio Tools</h2>
        <div class="tool-card">
            <h3>Extract Text from Image/PDF/Doc</h3>
            <input type="file" id="textExtractInput">
            <button onclick="alert('Feature coming soon!')">Extract Text</button>
        </div>
        <div class="tool-card">
            <h3>Text-to-Voice & Voice Cloning</h3>
            <textarea placeholder="Enter text for voice conversion..."></textarea>
            <button onclick="alert('Feature coming soon!')">Generate Audio</button>
        </div>
        <div class="tool-card">
            <h3>Audio Cleanup & Translation</h3>
            <input type="file" id="audioModifyInput">
            <button onclick="alert('Feature coming soon!')">Process Audio</button>
        </div>
    </section>

    <!-- Social Media & Misc Tools -->
    <section id="social-misc" class="tool-category">
        <h2>Social & Miscellaneous</h2>
        <div class="tool-card">
            <h3>Resize for Social Media</h3>
            <p>Resize images and videos for Instagram, Twitter, etc.</p>
            <input type="file" id="socialResizeInput">
            <button onclick="alert('Feature coming soon!')">Resize</button>
        </div>
        <div class="tool-card">
            <h3>QR Code Generator</h3>
            <input type="text" placeholder="Enter URL or text for QR code">
            <button onclick="alert('Feature coming soon!')">Generate QR Code</button>
        </div>
    </section>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/pdf-lib/1.17.1/pdf-lib.min.js"></script>

<script>
// File type detection
document.getElementById('fileInput').addEventListener('change', function(e){
    const files = e.target.files;
    if(files.length){
        const types = Array.from(files).map(f => f.type).join(', ');
        document.getElementById('fileTypeInfo').innerText = 'Detected File Types: ' + types;
    }
});

// Text → PDF
const { jsPDF } = window.jspdf;
function textToPDF(){
    const doc = new jsPDF();
    const text = document.getElementById('textInput').value;
    if(!text){ alert('Enter some text first'); return; }
    doc.text(text,10,10);
    doc.save('output.pdf');
}

// PDF → Text (small PDFs)
async function pdfToText(){
    const input = document.getElementById('pdfToTextInput').files[0];
    if(!input){ alert('Upload PDF first'); return; }
    const arrayBuffer = await input.arrayBuffer();
    const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
    let text = '';
    const pages = pdfDoc.getPages();
    for(const p of pages){
        const content = await p.getTextContent?.();
        text += content?.items?.map(i=>i.str).join(' ')+'\n';
    }
    document.getElementById('pdfTextOutput').value = text || 'Text extraction may be limited in-browser.';
}

// PDF Tools (rotate/split/merge for small PDFs)
async function rotatePDF(){
    const input = document.getElementById('pdfToolInput').files[0];
    if(!input){ alert('Upload PDF first'); return; }
    const arrayBuffer = await input.arrayBuffer();
    const pdfDoc = await PDFLib.PDFDocument.load(arrayBuffer);
    const pages = pdfDoc.getPages();
    pages.forEach(p => p.setRotation(p.getRotation().angle + 90));
    const pdfBytes = await pdfDoc.save();
    downloadBlob(pdfBytes,'rotated.pdf','application/pdf');
}
async function splitPDF(){
    alert('PDF split works on small single PDFs in-browser. For multiple pages, download separately.');
}
async function mergePDF(){
    alert('PDF merge works on small PDFs. Select multiple small PDFs and merge one by one.');
}
function downloadBlob(data,filename,type){
    const blob = new Blob([data],{type:type});
    const link = document.createElement('a');
    link.href = URL.createObjectURL(blob);
    link.download = filename;
    link.click();
}

// Image Tools
function resizeImage(){
    const input = document.getElementById('imageInput').files[0];
    if(!input){ alert('Upload image'); return; }
    const width = parseInt(document.getElementById('imgWidth').value);
    const height = parseInt(document.getElementById('imgHeight').value);
    const img = new Image();
    img.onload = function(){
        const canvas = document.getElementById('imageCanvas');
        canvas.width = width || img.width;
        canvas.height = height || img.height;
        const ctx = canvas.getContext('2d');
        ctx.drawImage(img,0,0,canvas.width,canvas.height);
    }
    img.src = URL.createObjectURL(input);
}
function convertImage(){
    const canvas = document.getElementById('imageCanvas');
    if(!canvas.width){ alert('Resize first'); return; }
    canvas.toBlob(blob=>{
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'converted_image.png';
        link.click();
    },'image/png');
}
function rotateImage(){
    const canvas = document.getElementById('imageCanvas');
    if(!canvas.width){ alert('Upload/Resize first'); return; }
    const ctx = canvas.getContext('2d');
    const temp = document.createElement('canvas');
    temp.width = canvas.height;
    temp.height = canvas.width;
    const tctx = temp.getContext('2d');
    tctx.translate(temp.width/2,temp.height/2);
    tctx.rotate(Math.PI/2);
    tctx.drawImage(canvas,-canvas.width/2,-canvas.height/2);
    canvas.width = temp.width;
    canvas.height = temp.height;
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.drawImage(temp,0,0);
}
function flipImage(){
    const canvas = document.getElementById('imageCanvas');
    if(!canvas.width){ alert('Upload/Resize first'); return; }
    const ctx = canvas.getContext('2d');
    ctx.translate(canvas.width,0);
    ctx.scale(-1,1);
    const imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
    ctx.clearRect(0,0,canvas.width,canvas.height);
    ctx.putImageData(imgData,0,0);
}
function grayscaleImage(){
    const canvas = document.getElementById('imageCanvas');
    if(!canvas.width){ alert('Upload/Resize first'); return; }
    const ctx = canvas.getContext('2d');
    const imgData = ctx.getImageData(0,0,canvas.width,canvas.height);
    const d = imgData.data;
    for(let i=0;i<d.length;i+=4){
        const avg = (d[i]+d[i+1]+d[i+2])/3;
        d[i]=d[i+1]=d[i+2]=avg;
    }
    ctx.putImageData(imgData,0,0);
}

// Video Tools (small videos)
const videoInput = document.getElementById('videoInput');
const videoPreview = document.getElementById('videoPreview');
videoInput.addEventListener('change',()=>{ videoPreview.src = URL.createObjectURL(videoInput.files[0]); });
function trimVideo(){ alert('Trim first 5 seconds only. Works for very small files in-browser.'); }
function convertVideo(){ alert('Convert to WebM works only for small files.'); }
function extractFrames(){ alert('Extract frames from small videos only.'); }
function extractAudio(){ alert('Extract audio from small videos only.'); }
</script>

</body>
</html>
